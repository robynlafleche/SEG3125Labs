<html lang="en-US">
<head>
    <title>Airbnb Survey Analysis</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.5.0/Chart.min.js"></script>
     <!-- JavaScript Bundle with Popper -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin="anonymous"></script>
    <!-- Latest compiled and minified CSS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.5.0/Chart.min.js"></script>
   <!-- jQuery library -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <!-- Latest compiled JavaScript -->
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script> 
</head>

<body>
    <h1 style="padding-left: 36%">Airbnb survey analysis</h1>
    <% for (var surveyQuestionResult in allSurveyResults){ %>
      <script>
        var clientGameState =  allSurveyResults       
     </script>
    <div class="card" style="background-color:grey">
        <h2><%= surveyQuestionResult %></h2>
        <% for (var surveyResult in allSurveyResults[surveyQuestionResult]){ %>
            <tr><%= surveyResult %> :  <%= allSurveyResults[surveyQuestionResult][surveyResult] %></tr>
        <% } %>  
      </div>        
    <% } %>  
    var json = '[{  "Time": "2017-08-17 16:35:28.000",  "Value": "3.85"}, {"Time": "2017-08-17 17:36:28.000","Value": "3.85"}, {"Time": "2017-08-17 18:35:28.000","Value": "3.86"}, {"Time": "2017-08-17 19:35:28.000","Value": "3.86"}, {"Time": "2017-08-18 07:35:28.000","Value": "3.87"}, { "Time": "2017-08-18 18:35:28.000", "Value": "3.86"}]';
    
    json = JSON.parse(json);
        json.forEach(function(element, index) {
          element.x = new Date(element['Time']).getTime();
          element.y = +element['Value'];
    
          delete element['Time'];
          delete element['Value'];
        });
     console.log(json);
    <!-- chart from https://www.chartjs.org/docs/latest/getting-started/ -->
    <script>
      //from https://stackoverflow.com/a/59136857
      let test ={}
      test = '<%- JSON.stringify(allSurveyResults) %>'; // test is now a valid js object

      console.log("test;"+ test)
     // let ff = JSON.stringify(allSurveyResults);
      const obj = JSON.parse(test)
      console.log("ff o"+obj)
      for (let i in obj){
        console.log(i+"is it working??????");
      }
      for (var property in test) {
  //console.log(`${property}: ${test[property]}`);
}
      console.log(test["How would you rate the overall appearance of the website?"]+"here>>>>")
      const labels = [
        '4 - Very Satisfactory',
        
      ];
    
      const data = {
        labels: labels,
        datasets: [{
          label: 'My First dataset',
          backgroundColor: 'rgb(255, 99, 132)',
          borderColor: 'rgb(255, 99, 132)',
          data: [0, 10, 5, 2, 20, 30, 45],
        }]
      };
    
      const config = {
        type: 'line',
        data: data,
        options: {}
      };
    </script>
   
    <div>
      <canvas id="myChart"></canvas>
    </div>
    <script>
      const myChart = new Chart(
        document.getElementById('myChart'),
        config
      );
    </script>
    
     
    
     
    <table class="table">
      <thead>
        <tr>
          <th scope="col">#</th>
          <th scope="col"><%allSurveyResults[2] %></th>
          <th scope="col">Last</th>
          <th scope="col">Handle</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <th scope="row">1</th>
          <td>Mark</td>
          <td>Otto</td>
          <td>@mdo</td>
        </tr>
        <tr>
          <th scope="row">2</th>
          <td>Jacob</td>
          <td>Thornton</td>
          <td>@fat</td>
        </tr>
        <tr>
          <th scope="row">3</th>
          <td>Larry</td>
          <td>the Bird</td>
          <td>@twitter</td>
        </tr>
      </tbody>
    </table>
</body>
</html>