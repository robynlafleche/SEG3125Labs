<html lang="en-US">
<head>
    <title>Airbnb Survey Analysis</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.5.0/Chart.min.js"></script>
     <!-- JavaScript Bundle with Popper -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin="anonymous"></script>
    <!-- Latest compiled and minified CSS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.5.0/Chart.min.js"></script>
   <!-- jQuery library -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <!-- Latest compiled JavaScript -->
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script> 
</head>

<body>
    <h1>Airbnb survey analysis</h1>
 


    <!-- getting the data from the db and saving it for the charts -->
    <!-- chart from https://www.chartjs.org/docs/latest/getting-started/ -->
    <script>
      //from https://stackoverflow.com/a/59136857
      let test ={}
      test = '<%- JSON.stringify(allSurveyResults) %>'; // test is now a valid js object
     //https://www.w3schools.com/js/js_json_parse.asp
      const obj = JSON.parse(test)
      console.log("ff o"+obj)
      let dataforCharts = [];
      let labelforCharts = []
      let tmpdata = []
      let tmplabels = []
      let questions = []
      for (let i in obj){
        questions.push(i)
        tmpdata = [];
        tmplabels = []
        for (let j in obj[i]){
          tmpdata.push(obj[i][j])
          tmplabels.push(j)
        }
        dataforCharts.push(tmpdata)
        labelforCharts.push(tmplabels)
        //i is the question itself
      }
    
  
    </script>
   
 
    
<!-- charts -->
    <script>
      // code from https://stackoverflow.com/a/53172538 
        $(function () {
            var ctx = document.getElementById("question0").getContext('2d');
            var data = {
                datasets: [{
                  label: questions[0],
                    data: dataforCharts[0],
                    backgroundColor: [
                    'rgba(75, 192, 192, 0.2)',
                    'rgba(54, 162, 235, 0.2)',
                    'rgba(153, 102, 255, 0.2)',
                    'rgba(255, 99, 132, 0.2)',
                    'rgba(255, 159, 64, 0.2)',
                    'rgba(255, 205, 86, 0.2)',
                    'rgba(201, 203, 207, 0.2)'
                  ],
                  borderColor: [
                  'rgb(75, 192, 192)',
                    'rgb(54, 162, 235)',
                    'rgb(153, 102, 255)',
                    'rgb(255, 99, 132)',
                    'rgb(255, 159, 64)',
                    'rgb(255, 205, 86)',
                
                    'rgb(201, 203, 207)'
                  ],
                }],
                labels: labelforCharts[0]
            };
            var myDoughnutChart = new Chart(ctx, {
                type: 'pie',
                data: data,
                options: {
                    responsive: false,
                    maintainAspectRatio: false,
                    legend: {
                        position: 'bottom',
                        labels: {
                            boxWidth: 12
                        }
                    }
                }
            });

            var ctx_2 = document.getElementById("question1").getContext('2d');
            var data_2 = {
                datasets: [{
                    data: dataforCharts[1],
                    backgroundColor: [
                  'rgba(255, 99, 132, 0.2)',
                  'rgba(255, 159, 64, 0.2)',
                  'rgba(255, 205, 86, 0.2)',
                  'rgba(75, 192, 192, 0.2)',
                  'rgba(54, 162, 235, 0.2)',
                  'rgba(153, 102, 255, 0.2)',
                  'rgba(201, 203, 207, 0.2)'
                ],
                borderColor: [
                  'rgb(255, 99, 132)',
                  'rgb(255, 159, 64)',
                  'rgb(255, 205, 86)',
                  'rgb(75, 192, 192)',
                  'rgb(54, 162, 235)',
                  'rgb(153, 102, 255)',
                  'rgb(201, 203, 207)'
                ],
                }],
                labels: labelforCharts[1]
            };
            var myDoughnutChart_2 = new Chart(ctx_2, {
                type: 'pie',
                data: data_2,
                options: {
                    responsive: false,
                    maintainAspectRatio: false,
                    legend: {
                        position: 'bottom',
                        labels: {
                            boxWidth: 12
                        }
                    }
                }
            });
            var ctx_3 = document.getElementById("question2").getContext('2d');
            var data = {
                datasets: [{
                  label: questions[2],
                    data: dataforCharts[2],
                    backgroundColor: [
      'rgba(255, 99, 132, 0.2)',
      'rgba(255, 159, 64, 0.2)',
      'rgba(255, 205, 86, 0.2)',
      'rgba(75, 192, 192, 0.2)',
      'rgba(54, 162, 235, 0.2)',
      'rgba(153, 102, 255, 0.2)',
      'rgba(201, 203, 207, 0.2)'
    ],
    borderColor: [
      'rgb(255, 99, 132)',
      'rgb(255, 159, 64)',
      'rgb(255, 205, 86)',
      'rgb(75, 192, 192)',
      'rgb(54, 162, 235)',
      'rgb(153, 102, 255)',
      'rgb(201, 203, 207)'
    ],
                }],
                labels: labelforCharts[2]
            };
            var myDoughnutChart = new Chart(ctx_3, {
                type: 'pie',
                data: data,
                options: {
                    responsive: false,
                    maintainAspectRatio: false,
                    legend: {
                        position: 'bottom',
                        labels: {
                            boxWidth: 12
                        }
                    }
                }
            });
            var ctx_4 = document.getElementById("question3").getContext('2d');
            var data = {
                datasets: [{
                  label: questions[3],
                    data: dataforCharts[3],
                    backgroundColor: [
      'rgba(255, 99, 132, 0.2)',
      'rgba(255, 159, 64, 0.2)',
      'rgba(255, 205, 86, 0.2)',
      'rgba(75, 192, 192, 0.2)',
      'rgba(54, 162, 235, 0.2)',
      'rgba(153, 102, 255, 0.2)',
      'rgba(201, 203, 207, 0.2)'
    ],
    borderColor: [
      'rgb(255, 99, 132)',
      'rgb(255, 159, 64)',
      'rgb(255, 205, 86)',
      'rgb(75, 192, 192)',
      'rgb(54, 162, 235)',
      'rgb(153, 102, 255)',
      'rgb(201, 203, 207)'
    ],
                }],
                labels: labelforCharts[3]
            };
            var myDoughnutChart = new Chart(ctx_4, {
                type: 'pie',
                data: data,
                options: {
                    responsive: false,
                    maintainAspectRatio: false,
                    legend: {
                        position: 'bottom',
                        labels: {
                            boxWidth: 12
                        }
                    }
                }
            });
            var ctx_5 = document.getElementById("question4").getContext('2d');
            var data = {
                datasets: [{
                  label: questions[4],
                    data: dataforCharts[4],
                    backgroundColor: [
      'rgba(255, 99, 132, 0.2)',
      'rgba(255, 159, 64, 0.2)',
      'rgba(255, 205, 86, 0.2)',
      'rgba(75, 192, 192, 0.2)',
      'rgba(54, 162, 235, 0.2)',
      'rgba(153, 102, 255, 0.2)',
      'rgba(201, 203, 207, 0.2)'
    ],
    borderColor: [
      'rgb(255, 99, 132)',
      'rgb(255, 159, 64)',
      'rgb(255, 205, 86)',
      'rgb(75, 192, 192)',
      'rgb(54, 162, 235)',
      'rgb(153, 102, 255)',
      'rgb(201, 203, 207)'
    ],
                }],
                labels: labelforCharts[4]
            };
            var myDoughnutChart = new Chart(ctx_5, {
                type: 'pie',
                data: data,
                options: {
                    responsive: false,
                    maintainAspectRatio: false,
                    legend: {
                        position: 'bottom',
                        labels: {
                            boxWidth: 12
                        }
                    }
                }
            });
            var ctx_6 = document.getElementById("question5").getContext('2d');
            var data = {
                datasets: [{
                  label: questions[5],
                    data: dataforCharts[5],
                    backgroundColor: [
      'rgba(255, 99, 132, 0.2)',
      'rgba(255, 159, 64, 0.2)',
      'rgba(255, 205, 86, 0.2)',
      'rgba(75, 192, 192, 0.2)',
      'rgba(54, 162, 235, 0.2)',
      'rgba(153, 102, 255, 0.2)',
      'rgba(201, 203, 207, 0.2)'
    ],
    borderColor: [
      'rgb(255, 99, 132)',
      'rgb(255, 159, 64)',
      'rgb(255, 205, 86)',
      'rgb(75, 192, 192)',
      'rgb(54, 162, 235)',
      'rgb(153, 102, 255)',
      'rgb(201, 203, 207)'
    ],
                }],
                labels: labelforCharts[5]
            };
            var myDoughnutChart = new Chart(ctx_6, {
                type: 'pie',
                data: data,
                options: {
                    responsive: false,
                    maintainAspectRatio: false,
                    legend: {
                        position: 'bottom',
                        labels: {
                            boxWidth: 12
                        }
                    }
                }
            });
            var ctx_7 = document.getElementById("question6").getContext('2d');
            var data = {
                datasets: [{
                  label: questions[6],
                    data: dataforCharts[6],
                    backgroundColor: [
      'rgba(255, 99, 132, 0.2)',
      'rgba(255, 159, 64, 0.2)',
      'rgba(255, 205, 86, 0.2)',
      'rgba(75, 192, 192, 0.2)',
      'rgba(54, 162, 235, 0.2)',
      'rgba(153, 102, 255, 0.2)',
      'rgba(201, 203, 207, 0.2)'
    ],
    borderColor: [
      'rgb(255, 99, 132)',
      'rgb(255, 159, 64)',
      'rgb(255, 205, 86)',
      'rgb(75, 192, 192)',
      'rgb(54, 162, 235)',
      'rgb(153, 102, 255)',
      'rgb(201, 203, 207)'
    ],
                }],
                labels: labelforCharts[6]
            };
            var myDoughnutChart = new Chart(ctx_7, {
                type: 'pie',
                data: data,
                options: {
                    responsive: false,
                    maintainAspectRatio: false,
                    legend: {
                        position: 'bottom',
                        labels: {
                            boxWidth: 12
                        }
                    }
                }
            });
            var ctx_8 = document.getElementById("question7").getContext('2d');
            var data = {
                datasets: [{
                  label: questions[7],
                    data: dataforCharts[7],
                    backgroundColor: [
      'rgba(255, 99, 132, 0.2)',
      'rgba(255, 159, 64, 0.2)',
      'rgba(255, 205, 86, 0.2)',
      'rgba(75, 192, 192, 0.2)',
      'rgba(54, 162, 235, 0.2)',
      'rgba(153, 102, 255, 0.2)',
      'rgba(201, 203, 207, 0.2)'
    ],
    borderColor: [
      'rgb(255, 99, 132)',
      'rgb(255, 159, 64)',
      'rgb(255, 205, 86)',
      'rgb(75, 192, 192)',
      'rgb(54, 162, 235)',
      'rgb(153, 102, 255)',
      'rgb(201, 203, 207)'
    ],
                }],
                labels: labelforCharts[7]
            };
            var myDoughnutChart = new Chart(ctx_8, {
                type: 'pie',
                data: data,
                options: {
                    responsive: false,
                    maintainAspectRatio: false,
                    legend: {
                        position: 'bottom',
                        labels: {
                            boxWidth: 12
                        }
                    }
                }
            });
        });

    </script>
</head>

<body style="text-align: center;">
  <!--  code for box from https://developer.mozilla.org/en-US/docs/Web/CSS/box-sizing -->
  <div class="chartsForData">
    <h2>Which budget range did the website advertise the most?</h2>
      <canvas class="styleForTheGraphs" id="question0" width="400px" height="400px"></canvas>
  </div>

  <div class="chartsForData" >
    <h2>What was your favourite feature of the website?</h2>
      <canvas class="styleForTheGraphs" id="question1"  width="400px" height="400px"></canvas>
  </div>

  <div class="chartsForData">
    <h2>Airbnb Highlight Location</h2>
      <canvas class="styleForTheGraphs" id="question2"  width="400px" height="400px"></canvas>
  </div>

  <div class="chartsForData">
    <h2>How likely are you to recommend Airbnb to a friend or colleague?</h2>
      <canvas class="styleForTheGraphs" id="question3"  width="400px" height="400px"></canvas>
  </div>
  <div class="chartsForData">
    <h2>How would you rate the overall appearance of the website?</h2>
      <canvas class="styleForTheGraphs" id="question4"  width="400px" height="400px"></canvas>
  </div>
  <div class="chartsForData">
    <h2>How easy was it for you to find a place to stay in your destination of choice?</h>
      <canvas class="styleForTheGraphs" id="question5"  width="400px" height="400px"></canvas>
  </div>
  <div class="chartsForData">
    <h2>How readable are the characters displayed on the website?</h2>
      <canvas class="styleForTheGraphs" id="question6"  width="400px" height="400px"></canvas>
  </div>
  <div class="chartsForData">
    <h2>How would you rank the difficulty of signing up for an account on Airbnb?</h2>
      <canvas class="styleForTheGraphs" id="question7"  width="400px" height="400px"></canvas>
  </div>
  <div class="chartsForData">
    <h2>Suggestions about the user interface experience</h2>
      <canvas class="styleForTheGraphs" id="question8"  width="400px" height="400px"></canvas>
  </div>
     
    
   
</body>
<style>
  .chartsForData {
    text-align: left; box-sizing: border-box; width: 100%;border: solid #5B6DCD 10px;padding: 5px;
  }
  .styleForTheGraphs {
    text-align: center; margin-left:36%
  }
</style>
</html>